CREATE DATABASE QuanLyKyTucXaSV



CREATE TABLE SINHVIEN
(
	MSSV		VARCHAR(10) NOT NULL PRIMARY KEY,
	HOTEN		NVARCHAR(30) NOT NULL,
	GIOITINH	NVARCHAR(5),
	DIENTHOAI	VARCHAR(10),
	MALOP		INT,
	NGAYVAOKTX	DATETIME,
	NGAYRAKTX	DATETIME
)

CREATE TABLE LOP
(
	MALOP		INT NOT NULL  PRIMARY KEY,
	TENLOP		NVARCHAR(30) NOT NULL
)

CREATE TABLE NHANVIEN
(
	MANV		INT NOT NULL  PRIMARY KEY,
	HOTEN		NVARCHAR(30) NOT NULL,
	DIENTHOAI	VARCHAR(10),
	GHICHU		NVARCHAR(10)
)

CREATE TABLE PHONG
(
	MAPHG		VARCHAR(4)	NOT NULL PRIMARY KEY,
	TENPHG		NVARCHAR(30)	NOT NULL,
	DIENTICH	FLOAT,
	SOGIUONG	INT,
	GIATHUE		INT,
)


CREATE TABLE THUEPHONG
(
	MAHD		VARCHAR(7) NOT NULL PRIMARY KEY,
	MSSV		VARCHAR(10),
	MAPHG		VARCHAR(4) NOT NULL,
	NGAYVAO		DATETIME,
	NGAYRA		DATETIME,
	TIENDATCOC	INT,
	GIATHUE		INT
)


CREATE TABLE TTTHUEPHONG
(
	MAHD			VARCHAR(7)	NOT NULL PRIMARY KEY,
	THANGNAM		DATETIME	NOT NULL,
	SOTIEN			INT,
	NGAYTHANHTOAN 		DATETIME,
	MANV			INT,
)


ALTER TABLE SINHVIEN ADD CONSTRAINT FK_SINHVIEN_LOP FOREIGN KEY (MALOP) REFERENCES LOP(MALOP)
ALTER TABLE TTTHUEPHONG ADD CONSTRAINT FK_TTTHUEPHONG_NHANVIEN FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV)
ALTER TABLE THUEPHONG ADD CONSTRAINT FK_THUEPHONG_TTTHUEPHONG FOREIGN KEY (MAHD) REFERENCES TTTHUEPHONG(MAHD)
ALTER TABLE THUEPHONG ADD CONSTRAINT FK_THUEPHONG_PHONG FOREIGN KEY (MAPHG) REFERENCES PHONG(MAPHG)
ALTER TABLE THUEPHONG ADD CONSTRAINT FK_THUEPHONG_SINHVIEN FOREIGN KEY (MSSV) REFERENCES SINHVIEN(MSSV)


Set dateformat dmy

INSERT INTO SINHVIEN VALUES('1611060001',N'Nguyễn Văn Anh',N'Nam','0932566793',1,'21/11/2018','9/3/2021')
INSERT INTO SINHVIEN VALUES('1611060004',N'Trần Hoàng Nam',N'Nam','0932566794',1,'21/11/2018','9/3/2021')
INSERT INTO SINHVIEN VALUES('1611060010',N'Nguyễn Thị Thùy Trang',N'Nữ','0932566795',1,'21/11/2018','9/3/2021')
INSERT INTO SINHVIEN VALUES('1611060012',N'Dương Anh Tú',N'Nam','0932566796',1,'19/11/2018','9/3/2021')
INSERT INTO SINHVIEN VALUES('1611060045',N'Nguyễn Lan Anh',N'Nữ','0932566797',1,'20/11/2018','9/3/2021')
INSERT INTO SINHVIEN VALUES('1611060316',N'Trần Thị Chính',N'Nữ','0932566798',2,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1611060046',N'Nguyễn Văn An',N'Nam','0932566798',2,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1711060047',N'Nguyễn Thanh Tâm',N'Nữ','0932566799',3,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1711060048',N'Lê Bích Trâm',N'Nữ','0932566711',3,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1711060011',N'Nguyễn Ngọc Phong',N'Nam','0932566712',2,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1711060021',N'Lê Nam Trung',N'Nam','0932566713',3,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1811060031',N'Trần Thanh Thiên',N'Nam','0932566734',2,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1811060041',N'Vũ Thị Huế',N'Nữ','0932566756',3,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1811060061',N'Hoàng Ngọc Bích',N'Nữ','0932566790',4,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1811067890',N'Nguyễn Văn Anh',N'Nam', '0932566709',4,'21/11/2019','9/3/2021')
INSERT INTO SINHVIEN VALUES('1811064567',N'Nguyễn Thái Sơn',N'Nam', '0932566708',4,'21/11/2019','9/3/2021')


INSERT INTO LOP VALUES(1,N'CCQ1911H')
INSERT INTO LOP VALUES(2,N'CCQ1910C')
INSERT INTO LOP VALUES(3,N'CCQ1911C')
INSERT INTO LOP VALUES(4,N'CCQ1910G')


INSERT INTO NHANVIEN VALUES(1,N'Nguyễn Văn An','0932766793',NULL)
INSERT INTO NHANVIEN VALUES(2,N'Ngô Văn Ba','0932466793',NULL)
INSERT INTO NHANVIEN VALUES(3,N'Lê Thị Quỳnh','0931566793',NULL)
INSERT INTO NHANVIEN VALUES(4,N'Trần Kim Xuyến','0930566793',NULL)
INSERT INTO NHANVIEN VALUES(5,N'Nguyễn Đàm Anh Thơ','0939566793',NULL)


INSERT INTO PHONG VALUES('1093',N'101',10.0,8,800000)
INSERT INTO PHONG VALUES('1091',N'102',10.0,8,800000)
INSERT INTO PHONG VALUES('1092',N'103',10.0,8,800000)
INSERT INTO PHONG VALUES('1094',N'104',10.0,8,800000)
INSERT INTO PHONG VALUES('1095',N'105',10.0,8,800000)
INSERT INTO PHONG VALUES('1096',N'106',11.0,8,900000)
INSERT INTO PHONG VALUES('1097',N'107',11.0,8,900000)
INSERT INTO PHONG VALUES('1098',N'108',11.0,8,900000)


INSERT INTO THUEPHONG VALUES('1011','1611060001','1093','21/11/2018','9/3/2021',500000,800000)
INSERT INTO THUEPHONG VALUES('1012','1611060004','1091','21/11/2018','9/3/2021',500000,800000)
INSERT INTO THUEPHONG VALUES('1013','1611060010','1092','21/11/2018','9/3/2021',500000,800000)
INSERT INTO THUEPHONG VALUES('1014','1611060012','1094','21/11/2018','9/3/2021',500000,800000)
INSERT INTO THUEPHONG VALUES('1015','1611060045','1095','21/11/2018','9/3/2021',500000,800000)
INSERT INTO THUEPHONG VALUES('1016','1611060316','1096','21/11/2018','9/3/2021',500000,800000)
INSERT INTO THUEPHONG VALUES('1017','1611060046','1097','21/11/2018','9/3/2021',500000,800000)
INSERT INTO THUEPHONG VALUES('1018','1711060047','1098','21/11/2018','9/3/2021',500000,800000)
INSERT INTO THUEPHONG VALUES('1019','1711060048','1093','21/11/2018','9/3/2021',500000,800000)
INSERT INTO THUEPHONG VALUES('1020','1711060011','1091','21/11/2018','9/3/2021',500000,800000)

INSERT INTO THUEPHONG VALUES('1021','1711060021','1091','21/11/2018','9/3/2021',600000,900000)
INSERT INTO THUEPHONG VALUES('1022','1811060031','1091','21/11/2018','9/3/2021',600000,900000)
INSERT INTO THUEPHONG VALUES('1023','1811060041','1091','21/11/2018','9/3/2021',600000,900000)
INSERT INTO THUEPHONG VALUES('1024','1811060061','1091','21/11/2018','9/3/2021',600000,900000)
INSERT INTO THUEPHONG VALUES('1025','1811067890','1091','21/11/2018','9/3/2021',600000,900000)
INSERT INTO THUEPHONG VALUES('1026','1811064567','1091','21/11/2018','9/3/2021',600000,900000)




INSERT INTO TTTHUEPHONG VALUES('1011','1/3/2021',800000,'9/3/2021',1)
INSERT INTO TTTHUEPHONG VALUES('1012','1/4/2021',800000,'9/4/2021',2)
INSERT INTO TTTHUEPHONG VALUES('1013','1/5/2021',800000,'9/5/2021',3)
INSERT INTO TTTHUEPHONG VALUES('1014','1/6/2021',800000,'9/6/2021',4)
INSERT INTO TTTHUEPHONG VALUES('1015','2/6/2021',850000,'8/6/2021',5)
INSERT INTO TTTHUEPHONG VALUES('1016','3/6/2021',850000,'8/6/2021',1)
INSERT INTO TTTHUEPHONG VALUES('1017','4/6/2021',850000,'6/6/2021',4)
INSERT INTO TTTHUEPHONG VALUES('1018','10/6/2021',900000,'7/6/2021',2)
INSERT INTO TTTHUEPHONG VALUES('1019','15/6/2021',900000,'9/6/2021',3)
INSERT INTO TTTHUEPHONG VALUES('1020','11/6/2021',900000,'9/6/2021',1)


INSERT INTO TTTHUEPHONG VALUES('1021','11/6/2021',900000,'9/6/2021',1)
INSERT INTO TTTHUEPHONG VALUES('1022','11/6/2021',900000,'9/6/2021',5)
INSERT INTO TTTHUEPHONG VALUES('1023','11/6/2021',900000,'9/6/2021',2)
INSERT INTO TTTHUEPHONG VALUES('1024','11/6/2021',900000,'9/6/2021',3)
INSERT INTO TTTHUEPHONG VALUES('1025','11/6/2021',900000,'9/6/2021',4)
INSERT INTO TTTHUEPHONG VALUES('1026','11/6/2021',900000,'9/6/2021',1)



DROP DATABASE QuanLyKyTucXaSV
